import std.test;
import std.io;


class Person {
    age: i64;
}


fn test_primitive_smoke() -> unit {
    var bytes: u8[] = u8[](3u);
    assert(bytes.len() == 3u);
    assert(bytes[0u] == (u8)0);
    bytes[1u] = (u8)17;
    assert(bytes.get(1u) == (u8)17);

    var nums: i64[] = i64[](2u);
    assert(nums.len() == 2u);
    assert(nums[0u] == 0);
    nums.set(1u, -9);
    assert(nums[1u] == -9);
}


fn test_reference_default_null() -> unit {
    var people: Person[] = Person[](2u);
    assert(people.len() == 2u);
    assert(people[0u] == null);
    assert(people[1u] == null);

    people[1u] = Person(7);
    assert(people[1u] != null);
}


fn test_slice_copy_behavior() -> unit {
    var src: u8[] = u8[](4u);
    src[0u] = (u8)10;
    src[1u] = (u8)20;
    src[2u] = (u8)30;
    src[3u] = (u8)40;

    var cut: u8[] = src[1u:3u];
    assert(cut.len() == 2u);
    assert(cut[0u] == (u8)20);
    assert(cut[1u] == (u8)30);

    src[1u] = (u8)99;
    assert(cut[0u] == (u8)20);
}


fn test_get_oob_panics() -> unit {
    var arr: u8[] = u8[](1u);
    arr.get(1u);
}


fn test_set_oob_panics() -> unit {
    var arr: u8[] = u8[](1u);
    arr.set(1u, (u8)1);
}


fn test_slice_oob_panics() -> unit {
    var arr: u8[] = u8[](1u);
    arr.slice(0u, 2u);
}


fn main() -> i64 {
    var select: u64 = read_all().strip().to_u64();

    if select == 1u { test_primitive_smoke(); }
    if select == 2u { test_reference_default_null(); }
    if select == 3u { test_slice_copy_behavior(); }
    if select == 4u { test_get_oob_panics(); }
    if select == 5u { test_set_oob_panics(); }
    if select == 6u { test_slice_oob_panics(); }

    return 0;
}
